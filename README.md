# Oil-production-optimization

Проект является модулем программного комплекса разработки месторождений "HDPoM 2.0".<br>
Он оптимизирует положения добывающих и нагнетательных скважин для увеличения добычи нефти.<br>
Реализован на С++ и Python. <br>
На основе проекта написана бакалаврская работа.

## Модули проекта
* [Метод Гаусса-Ньютона](#gauss_newton)
* [Корректировка областей скважин](#correction)
* [Взаимодействие с "HDPoM 2.0"](#HDPoM)
* [Визуализация](#visualization)

## Используемые библиотеки:
1. STL
2. Matplotlib
3. Eigen
4. RapidJSON

## <a id="gauss_newton">Метод Гаусса-Ньютона</a>

Данный метод вычисляет оптимальное положение для каждой скважины.<br> 
### Шаг алгоритма:
1. вычисление количества добытой нефти и воды,
2. сборка системы уравнений,
3. корректировка областей скважин,
4. решение системы с учётом новых областей,
5. изменение положения скважин.

Таким образом, метод постепенно двигает скважины, добиваясь наибольшей добычи нефти. 

## <a id="correction">Корректировка областей скважин</a>

Для каждой скважины задана прямоугольная область, где она может перемещаться. <br>
Разработанный алгоритм корректирует области так, чтобы они не пересекались.<br>
Благодаря этому скважины могут двигаться в изначальных рамках, не попадая в один участок сетки. 

Было:
![Image alt](https://github.com/yabaranov/Oil-production-optimization/raw/master/res/graph/geometryBefore.png)

Стало:
![Image alt](https://github.com/yabaranov/Oil-production-optimization/raw/master/res/graph/geometryAfter.png)

## <a id="HDPoM">Взаимодействие с "HDPoM 2.0"</a>

### Методу Гаусса-Ньютона необходимо:
1. знать о количестве добытой нефти и воды,
2. переставлять скважины,
3. запускать "HDPoM 2.0".

Для решения этих проблем используется класс, отвественный за взаимодействие с "HDPoM 2.0". <br>
Он настраивает его, изменяя входные файлы, и получает результаты, читая выходные файлы. <br>
Время работы "HDPoM 2.0" гораздо превышает время работы модуля. <br>
Поэтому параллельно запускается много его копий, значительно сокращая время оптимизации.

## <a id="visualization">Визуализация</a>

Для визуализации использовалась библиотека Python - Matplotlib. <br>
Написано несколько скриптов, которые вызываются сразу после работы основной программы. 

## Результаты
Оптимизация даёт прибавку до 20% по сравнению со стандартными схемами расположения скважин. <br>
Можно отследить движение скважин:

![Image alt](https://github.com/yabaranov/Oil-production-optimization/raw/master/res/graph/wellMovement.png)
где черный контур – контур нефтеносности, круг – добывающая скважина, треугольник – нагнетательная.

Или оценить эффект оптимизации в отдельной скважине: 

![Image alt](https://github.com/yabaranov/Oil-production-optimization/raw/master/res/graph/productionByDay.png)

